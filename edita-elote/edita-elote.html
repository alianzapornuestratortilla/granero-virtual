<!DOCTYPE html>
<html lang="es-mx">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nuevo e-lote</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans&family=Noto+Sans+Mono&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/image-formatter.css">
    <style>
        :root {
            --current-main-max-width: 700px;
        }

        /*especificar para cada tipo de pantalla dependiendo del contenido*/

        div.switch-statement#switch-semilla-propia span.variable.izquierdo#switch-semilla-propia-1:after {
            content: 'conservada de ciclos pasados';
        }

        div.switch-statement#switch-semilla-propia span.variable.derecho#switch-semilla-propia-1:after {
            content: 'de alguien más';
        }

        div.switch-statement#switch-diversidad-de-cultivo span.variable.izquierdo#switch-diversidad-de-cultivo-2:after {
            content: 'de frijol, calabaza y quelites,';
        }

        div.switch-statement#switch-diversidad-de-cultivo span.variable.derecho#switch-diversidad-de-cultivo-2:after {
            content: '';
        }

        div.switch-statement#switch-diversidad-de-cultivo span.variable.izquierdo#switch-diversidad-de-cultivo-1:after {
            content: 'en milpa tradicional';
        }

        div.switch-statement#switch-diversidad-de-cultivo span.variable.derecho#switch-diversidad-de-cultivo-1:after {
            content: 'maíz y nada más';
        }

        div.switch-statement#switch-servicios span.variable.izquierdo#switch-servicios-1:after {
            content: 'solamente le vendo el grano así como está; quién lo compre viene por el y se lo lleva';
        }

        div.switch-statement#switch-ofrece-en-pié span.variable.derecho#switch-ofrece-en-pié-1:after {
            content: 'En su caso, que venga quien lo compre a cosecharlo';
        }

        div.switch-statement#switch-ofrece-en-pié span.variable.izquierdo#switch-ofrece-en-pié-1:after {
            content: 'Yo me encargaré de cosecharlo, secarlo y desgranarlo';
        }

        div.switch-statement#switch-secado span.variable.izquierdo#switch-secado-1:after {
            content: 'al sol, en azotea o patio';
        }

        div.switch-statement#switch-secado span.variable.derecho#switch-secado-1:after {
            content: 'en un equipo especializado, como un silo';
        }

        @media screen and (min-width: 100px) {

            /* teléfonos */
            form fieldset#usos-comunes {
                display: flex;
                flex-flow: row wrap;
                justify-content: space-evenly;
                align-items: center;
                gap: 0.5rem;
            }



            @media screen and (min-width: 577px) {

                /* tablets */
            }
            @media screen and (min-width: 993px) {
                /* escritorio desktop*/

                body main div#contenido-main {                    
                    max-width: var(--current-main-max-width);
                    margin: 0 auto;                    
                }
            }

            @media (prefers-color-scheme: light) {
                form fieldset legend {
                    color: var(--verde-palido);
                }
            }

            @media (prefers-color-scheme: dark) {}
        }
    </style>
</head>

<body>
    <header class="top">
        <div id="da-menu" onclick="despliegaMenú(event)">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none"
                stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="3" y1="12" x2="21" y2="12"></line>
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
        </div>

        <div id="logotipo">
            <a href=""><img src="../media/images/logo.png" alt=""></a>
        </div>

    </header>
    <div class="contenido-pantalla">
        <aside id="side-menu">
            <nav id="contenido-sidebar">
                <h3>general</h3>
                <ul>
                    <li><a href=""><strong>mensajes</strong></a></li>
                    <li><a href=""><strong>mi perfil</strong></a></li>
                </ul>
                <h3>venta de grano</h3>
                <ul>
                    <li><a href=""><strong>mi granero</strong></a></li>
                    <li><a href=""><strong>crear nuevo e-lote</strong></a></li>
                    <li><a href=""><strong>editar e-lote</strong></a></li>
                    <li><a href=""><strong>actualización de inventarios</strong></a></li>
                </ul>
                <h3>compra de grano</h3>
                <ul>
                    <li><a href=""><strong>consultar oferta de maíz</strong></a></li>
                </ul>
                <h3>flete</h3>
                <ul>
                    <li><a href=""><strong>solicitar flete</strong></a></li>
                    <li><a href=""><strong>fletes vacantes</strong></a></li>
                    <li><a href=""><strong>ofertar servicio de flete</strong></a></li>
                    <li><a href=""><strong>estatus de flete</strong></a></li>
                </ul>
                <h3>almacenamiento</h3>
                <ul>
                    <li><a href=""><strong>estatus</strong></a></li>
                    <li><a href=""><strong>solicitud de retiro</strong></a></li>
                    <li><a href=""><strong>solicitud de ingreso</strong></a></li>
                </ul>
                <h3>análisis</h3>
                <ul>
                    <li><a href=""><strong>solicitud de análisis</strong></a></li>
                    <li><a href=""><strong>compartir análisis</strong></a></li>
                    <li><a href=""><strong>añadir a e-lote</strong></a></li>
                    <li><a href=""><strong>reporte de análisis</strong></a></li>
                </ul>

            </nav>
        </aside>
        <main>
            <div id="contenido-main">
                <header>
                    <div id="subtítulo-izquierdo">
                        <h4 id="subtíulo-top"><strong><span id="el-subtítulo"></span> e-lote</strong></h4>
                        <h3 id="subtíulo-bottom"><strong>nombre del e-lote</strong></h3>
                    </div>
                    <div id="subtítulo-derecho">
                        <a href=""><button type="button" class="cancelar"><strong>Cancelar</strong></button></a>
                    </div>
                </header>
                <form action="">

                    <fieldset id="fotografías-del-e-lote">
                        <legend><strong>Fotografías de mi e-lote de maíz</strong></legend>
                        <div id="main-photo">

                        </div>
                        <div id="photo-bar">

                        </div>
                        <label for="imgs"><strong>Seleccione la imágen principal de su e-lote.</strong></label>
                        <input type="file" name="imgs" accept="image/*" onchange="treatImages(event)" id="input-fotos">
                        <br>
                        <button type="button" id="ya-estuvo" onclick="addPhoto(event)"
                            class="botón botón-morado">Agregar
                            nueva
                            fotografía</button>
                        <button type="button" id="btn-cancelar" onclick="cancelBarImages(event)"
                            class="botón botón-rojo">Cancelar
                            selección de
                            imágenes</button>
                    </fieldset>

                    <fieldset>
                        <legend><strong>el nombre por el que le conocen a este maíz es</strong></legend>
                        <input type="text" name="nombre-completo" minlength="5" maxlength="30" required
                            oninput="void actualizaNombreDeElote(event);">
                    </fieldset>

                    <fieldset id="usos-comunes">
                        <legend><strong>son usos comunes para este maíz</strong></legend>
                        <div class="check-box">
                            <input type="checkbox" name="tortillas" id="tortillas-checkbox"
                                onchange="void aChinga(event);">
                            <label class="overboard" for="tortillas" onclick="checkDaBox(event)"><strong>tortillas y
                                    tacos</strong></label>
                        </div>
                        <div class="check-box">
                            <input type="checkbox" name="garnachas" id="garnachas-checkbox">
                            <label for="garnachas" onclick="checkDaBox(event)" class="muy-grande overboard"><strong>
                                    quesadillas, gorditas, tlacoyos, sopes, huaraches, memelas, itacates, chalupas,
                                    tlaxcales,
                                    molotes
                                    polcanes y panuchos</strong></label>
                        </div>
                        <div class="check-box">
                            <input type="checkbox" name="tamales" id="tamales-checkbox">
                            <label for="tamales" onclick="checkDaBox(event)"><strong>tamales y
                                    torundas</strong></label>
                        </div>
                        <div class="check-box">
                            <input type="checkbox" name="tostadas" id="tostadas-checkbox">
                            <label class="overboard" for="tostadas" onclick="checkDaBox(event)"><strong>tostadas,
                                    totopos y
                                    horneadas</strong></label>
                        </div>
                        <div class="check-box">
                            <input type="checkbox" name="tlayudas" id="tlayudas-checkbox">
                            <label for="tlayudas" onclick="checkDaBox(event)"><strong>tlayudas</strong></label>
                        </div>
                        <div class="check-box">
                            <input type="checkbox" name="pozole" id="pozole-checkbox">
                            <label for="pozole" onclick="checkDaBox(event)"><strong>pozole</strong></label>
                        </div>
                        <div class="check-box">
                            <input type="checkbox" name="palomitas" id="palomitas-checkbox">
                            <label for="palomitas" onclick="checkDaBox(event)"><strong>palomitas</strong></label>
                        </div>
                        <div class="check-box">
                            <input type="checkbox" name="pinole" id="pinole-checkbox">
                            <label for="pinole" onclick="checkDaBox(event)"><strong>pinole</strong></label>
                        </div>
                        <div class="check-box">
                            <input type="checkbox" name="atole" id="atole-checkbox">
                            <label for="atole" onclick="checkDaBox(event)"><strong>atole y atole agrio</strong></label>
                        </div>

                        <div class="check-box">
                            <input type="checkbox" name="pozol" id="pozol-checkbox">
                            <label for="pozol" onclick="checkDaBox(event)"><strong>pozol</strong></label>
                        </div>

                        <div class="check-box">
                            <input type="checkbox" name="tejate" id="tejate-checkbox">
                            <label for="tejate" onclick="checkDaBox(event)"><strong>tejate, tejuino o
                                    tascalate</strong></label>
                        </div>

                        <fieldset class="lista-de-otros-container">
                            <div>
                                <div class="check-box">
                                    <input type="checkbox" class="input-otros" name="otros" id="otros-checkbox"
                                        otros="div.lista-de-otros button.btn-añade" onchange="showHideOtros(event)">
                                    <label for="otros" onclick="checkDaBox(event)"><strong>Otros usos</strong></label>
                                </div>
                            </div>
                            <div class="lista-de-otros" id="otros-usos" style="display: none;"></div>
                            <button type="button" class="btn-añade"
                                onclick="void añadeOtro('otros-usos','template-otro-uso');"
                                style="display: none;">&plus;</button>
                        </fieldset>


                    </fieldset>

                    <div class="switch-statement" id="switch-semilla-propia">
                        <div class="texto-medio statement">
                            <strong>La semilla que sembré para obtener este maíz</strong>
                        </div>
                        <div class="switch-container" onclick="void swicheaOpción(event);">
                            <!-- for de label e ID de label deben de ser iguales, el name na mas para homogeneidad -->
                            <strong class="izquierda texto-grande-móvil seleccionado">es propia,</strong>
                            <label class="switch" for="semilla-propia">
                                <input type="checkbox" name="semilla-propia" id="si-es-semilla-propia"
                                    onchange="void despliegalasOpciones(lasOpciones);" />
                                <div class="slider round"></div>
                            </label>
                            <strong class="derecha texto-grande-móvil">la conseguí</strong>

                        </div>
                        <div class="texto-medio statement">
                            <strong><span class="variable izquierdo" id="switch-semilla-propia-1"></span></strong>
                            </strong>
                        </div>
                    </div>

                    <div class="switch-statement" id="switch-comprada-truequeada">
                        <div class="texto-medio statement">
                            <strong></strong>
                        </div>
                        <div class="switch-container" onclick="void swicheaOpción(event);">
                            <!-- for de label e ID de label deben de ser iguales, el name na mas para homogeneidad -->
                            <strong class="izquierda seleccionado">la compré</strong>
                            <label class="switch" for="comprada-truequeada">
                                <input type="checkbox" name="comprada-truequeada" id="es-omprada-truequeada"
                                    onchange="void despliegalasOpciones(lasOpciones);" />
                                <div class="slider round"></div>
                            </label>
                            <strong class="derecha">la intercambié</strong>

                        </div>
                        <div class="texto-medio statement">
                            <strong></strong>
                        </div>
                    </div>

                    <div class="switch-statement" id="switch-origen-distinto">
                        <div class="texto-medio statement">
                            <strong></strong>
                        </div>
                        <div class="switch-container" onclick="void swicheaOpción(event);">
                            <!-- for de label e ID de label deben de ser iguales, el name na mas para homogeneidad -->
                            <strong class="izquierda seleccionado">SI</strong>
                            <label class="switch" for="recuerda-origen-distinto">
                                <input type="checkbox" name="recuerda-origen-distinto"
                                    id="usuario-recuerda-origen-distinto"
                                    onchange="void despliegalasOpciones(lasOpciones);" />
                                <div class="slider round"></div>
                            </label>
                            <strong class="derecha">NO</strong>

                        </div>
                        <div class="texto-medio statement">
                            <strong>recuerdo de quién la obtuve</strong>
                        </div>
                    </div>

                    <div class="a-fieldset" id="fieldset-nombre-origen-distinto">
                        <fieldset>
                            <legend><strong>el nombre de la persona u organización de quién la obtuve es</strong>
                            </legend>
                            <input type="text" name="nombre-origen-distinto" minlength="15">
                        </fieldset>
                    </div>

                    <div class="a-fieldset" id="fieldset-lugar-de-origen">
                        <fieldset>
                            <legend><strong>el lugar de orígen de la semilla es</strong></legend>
                            <input type="text" name="lugar-de-origen" minlength="15" required>
                            <small>ej. Comonfort, Guanajuato</small>
                        </fieldset>
                    </div>

                    <div class="switch-statement" id="switch-diversidad-de-cultivo">
                        <div class="texto-medio statement">
                            <strong>El maíz que siembro está</strong>
                        </div>
                        <div class="switch-container" onclick="void swicheaOpción(event);">
                            <!-- for de label e ID de label deben de ser iguales, el name na mas para homogeneidad -->
                            <strong class="izquierda texto-grande-móvil seleccionado">acompañado</strong>
                            <label class="switch" for="diversidad-de-cultivo">
                                <input type="checkbox" name="diversidad-de-cultivo" id="diversidad-de-cultivo"
                                    onchange="void despliegalasOpciones(lasOpciones);" />
                                <div class="slider round"></div>
                            </label>
                            <strong class="derecha">solito</strong>

                        </div>
                        <div class="texto-medio statement">
                            <strong><span class="variable izquierdo" id="switch-diversidad-de-cultivo-2"></span> es
                                decir,
                                <span class="variable izquierdo" id="switch-diversidad-de-cultivo-1"></span></strong>
                        </div>
                    </div>

                    <div class="switch-statement" id="switch-uso-de-agroquímicos">
                        <div class="texto-medio statement">
                            <strong></strong>
                        </div>
                        <div class="switch-container" onclick="void swicheaOpción(event);">
                            <!-- for de label e ID de label deben de ser iguales, el name na mas para homogeneidad -->
                            <strong class="izquierda seleccionado">NO</strong>
                            <label class="switch" for="uso-de-agroquímicos">
                                <input type="checkbox" name="uso-de-agroquímicos" id="uso-de-agroquímicos"
                                    onchange="void despliegalasOpciones(lasOpciones);" />
                                <div class="slider round"></div>
                            </label>
                            <strong class="derecha">SI</strong>

                        </div>
                        <div class="texto-medio statement">
                            <strong>utilicé fertilizantes químicos</strong>
                            <br>
                            <small>por ejemplo, urea, amoniaco, MAP, superfosfato, de liberación controlada, los que
                                reparte
                                el
                                gobierno, etc.</small>
                        </div>
                    </div>

                    <div class="switch-statement" id="switch-uso-de-abonos">
                        <div class="texto-medio statement">
                            <strong></strong>
                        </div>
                        <div class="switch-container" onclick="void swicheaOpción(event);">
                            <!-- for de label e ID de label deben de ser iguales, el name na mas para homogeneidad -->
                            <strong class="izquierda seleccionado">SI</strong>
                            <label class="switch" for="uso-de-abonos">
                                <input type="checkbox" name="uso-de-abonos" id="uso-de-abonos"
                                    onchange="void despliegalasOpciones(lasOpciones);" />
                                <div class="slider round"></div>
                            </label>
                            <strong class="derecha">NO</strong>

                        </div>
                        <div class="texto-medio statement">
                            <strong>utilicé abonos naturales</strong>
                            <br>
                            <small>por ejemplo estiércol, bokashi, composta o lombricomposta, harína de roca, cal
                                agrícola,
                                abonos verdes, purin, biol, etc.</small>
                        </div>
                    </div>

                    <div class="switch-statement" id="switch-uso-de-venenos">
                        <div class="texto-medio statement">
                            <strong>en la parcela donde sembré el maíz</strong>
                        </div>
                        <div class="switch-container" onclick="void swicheaOpción(event);">
                            <!-- for de label e ID de label deben de ser iguales, el name na mas para homogeneidad -->
                            <strong class="izquierda seleccionado">NO</strong>
                            <label class="switch" for="uso-de-venenos">
                                <input type="checkbox" name="uso-de-venenos" id="uso-de-venenos"
                                    onchange="void despliegalasOpciones(lasOpciones);" />
                                <div class="slider round"></div>
                            </label>
                            <strong class="derecha">SI</strong>

                        </div>
                        <div class="texto-medio statement">
                            <strong>utilicé químicos para el control de plagas, enfermedades y malezas</strong>
                            <br>
                            <small>conocidos como fungicidas, herbicidas, insecticidas; por ejemplo faena&reg;
                                (glifosato),
                                expander&reg;, regent&reg;, fastac&reg;, etc.</small>
                        </div>
                    </div>

                    <div class="switch-statement" id="switch-uso-de-control-biológico">
                        <div class="texto-medio statement">
                            <strong>y</strong>
                        </div>
                        <div class="switch-container" onclick="void swicheaOpción(event);">
                            <!-- for de label e ID de label deben de ser iguales, el name na mas para homogeneidad -->
                            <strong class="izquierda seleccionado">SI</strong>
                            <label class="switch" for="uso-de-control-biológico">
                                <input type="checkbox" name="uso-de-control-biológico" id="uso-de-control-biológico"
                                    onchange="void despliegalasOpciones(lasOpciones);" />
                                <div class="slider round"></div>
                            </label>
                            <strong class="derecha">NO</strong>

                        </div>
                        <div class="texto-medio statement">
                            <strong>utilicé alternativas mecánicas, de control biológico o sustancias permitidas en la
                                agricultura orgánica para el control de plagas, enfermedades y malezas</strong>
                            <br>
                            <small>por ejemplo quitar los quelites a mano o con el azadón; bioles; caldos minerales como
                                sulfocálcio, bordelés, ceniza; extractos y tés de composta; microorganismos benéficos
                                como
                                trichoderma, metarhizum, beauveria, etc. </small>
                        </div>
                    </div>

                    <div class="switch-statement" id="switch-uso-de-rastrojo">
                        <div class="texto-medio statement">
                            <strong>en esa misma parcela</strong>
                        </div>
                        <div class="switch-container" onclick="void swicheaOpción(event);">
                            <!-- for de label e ID de label deben de ser iguales, el name na mas para homogeneidad -->
                            <strong class="izquierda seleccionado">SI</strong>
                            <label class="switch" for="uso-de-rastrojo">
                                <input type="checkbox" name="uso-de-rastrojo" id="uso-de-rastrojo"
                                    onchange="void despliegalasOpciones(lasOpciones);" />
                                <div class="slider round"></div>
                            </label>
                            <strong class="derecha">NO</strong>

                        </div>
                        <div class="texto-medio statement">
                            <strong>conservé el rastrojo para proteger el suelo</strong>
                        </div>
                    </div>

                    <div class="switch-statement" id="switch-cuenta-con-certificación">
                        <div class="texto-medio statement">
                            <strong>este cultivo de maíz que estoy ofreciendo</strong>
                        </div>
                        <div class="switch-container" onclick="void swicheaOpción(event);">
                            <!-- for de label e ID de label deben de ser iguales, el name na mas para homogeneidad -->
                            <strong class="izquierda seleccionado">NO</strong>
                            <label class="switch" for="cuenta-con-certificación">
                                <input type="checkbox" name="cuenta-con-certificación" id="cuenta-con-certificación"
                                    onchange="void despliegalasOpciones(lasOpciones);" />
                                <div class="slider round"></div>
                            </label>
                            <strong class="derecha">SI</strong>

                        </div>
                        <div class="texto-medio statement">
                            <strong>cuenta con algún tipo de certificación</strong>
                            <br>
                            <small>por ejemplo: orgánico, orgánico-participativo, libre de OGM</small>
                        </div>
                    </div>

                    <div class="switch-statement" id="switch-cuenta-con-certificación-orgánica">
                        <div class="texto-medio statement">
                            <strong></strong>
                        </div>
                        <div class="switch-container" onclick="void swicheaOpción(event);">
                            <!-- for de label e ID de label deben de ser iguales, el name na mas para homogeneidad -->
                            <strong class="izquierda seleccionado">NO</strong>
                            <label class="switch" for="cuenta-con-certificación-orgánica">
                                <input type="checkbox" name="cuenta-con-certificación-orgánica"
                                    id="cuenta-con-certificación-orgánica"
                                    onchange="void despliegalasOpciones(lasOpciones);" />
                                <div class="slider round"></div>
                            </label>
                            <strong class="derecha">SI</strong>

                        </div>
                        <div class="texto-medio statement">
                            <strong>cuenta con certificación orgánica mediante certificadora o mediante certficación
                                participativa</strong>
                            <br>
                        </div>
                    </div>

                    <div class="a-fieldset" id="fieldset-certificado-orgánico"">
                        <fieldset >
                            <legend><strong>seleccione el archivo pdf o de imágen del certificado</strong></legend>
                            <input type=" file" accept="image/*,.pdf" name="certificado-orgánico" max-size="10000000">
                        </fieldset>
                    </div>

                    <div class="switch-statement" id="switch-cuenta-con-certificación-libre-de-OGM">
                        <div class="texto-medio statement">
                            <strong></strong>
                        </div>
                        <div class="switch-container" onclick="void swicheaOpción(event);">
                            <!-- for de label e ID de label deben de ser iguales, el name na mas para homogeneidad -->
                            <strong class="izquierda seleccionado">NO</strong>
                            <label class="switch" for="cuenta-con-certificación-libre-de-OGM">
                                <input type="checkbox" name="cuenta-con-certificación-libre-de-OGM"
                                    id="cuenta-con-certificación-libre-de-OGM"
                                    onchange="void despliegalasOpciones(lasOpciones);" />
                                <div class="slider round"></div>
                            </label>
                            <strong class="derecha">SI</strong>

                        </div>
                        <div class="texto-medio statement">
                            <strong>cuenta con certificación de estar libre de organismos genéticamente
                                modificados</strong>
                        </div>
                    </div>

                    <div class="a-fieldset" id="fieldset-certificado-libre-de-OGM">
                        <fieldset>
                            <legend><strong>seleccione el archivo pdf o de imágen del certificado</strong></legend>
                            <input type="file" accept="image/*,.pdf" name="certificado-libre-de-OGM"
                                max-size="10000000">
                        </fieldset>
                    </div>

                    <div class="switch-statement" id="switch-ofrece-en-pié">
                        <div class="texto-medio statement">
                            <strong></strong>
                        </div>
                        <div class="switch-container" onclick="void swicheaOpción(event);">
                            <!-- for de label e ID de label deben de ser iguales, el name na mas para homogeneidad -->
                            <strong class="izquierda seleccionado">NO</strong>
                            <label class="switch" for="ofrece-en-pié">
                                <input type="checkbox" name="ofrece-en-pié" id="ofrece-en-pié"
                                    onchange="void despliegalasOpciones(lasOpciones);" />
                                <div class="slider round"></div>
                            </label>
                            <strong class="derecha">SI</strong>

                        </div>
                        <div class="texto-medio statement">
                            <strong>considero ofrecerlo en píe. <span class="variable izquierdo"
                                    id="switch-ofrece-en-pié-1"></span></strong>
                        </div>
                    </div>

                    <div class="a-fieldset" id="fieldset-precio-por-unidad-de-medida-en-pié">
                        <fieldset class="precio unidad-de-medida">
                            <legend><strong>el precio al que quiero vender este maíz en pié es de</strong></legend>
                            <div class="numero-opciones">
                                <div class="cifra">
                                    <span class="currency-companion"><strong>$&nbsp;</strong></span><input type="number"
                                        class="valor-medido" name="precio-por-unidad-de-medida-en-pié"
                                        onchange="void valorVálido(event);">
                                    <span class="currency-companion all-petite-caps"><strong>mxn</strong></span>
                                </div>
                                <span>&nbsp;por&nbsp;</span><select name="opciones-unidad-de-medida-en-pié"
                                    class="opciones-unidad-de-medida"
                                    onchange="void actualizaUnidades(event);"></select>
                            </div>
                        </fieldset>
                    </div>

                    <div class="a-fieldset" id="fieldset-hectáreas-disponibles-en-pié">
                        <fieldset>
                            <legend><strong>el número de hectáreas de este maíz que tengo disponible para vender en pié
                                    es
                                    de</strong></legend>
                            <input type="number" placeholder="2" min="1" step="0.1" max="1000"
                                name="hectáreas-disponibles-en-pié"> Has
                        </fieldset>
                    </div>

                    <div class="a-fieldset" id="fieldset-venta-mínima-en-pié">
                        <fieldset>
                            <legend><strong>el número mínimo de hectáreas de este maíz que vendería en pié a un
                                    comprador
                                    individual
                                    es de</strong></legend>
                            <input type="number" placeholder="2" min="1" step="0.1" max="1000"
                                name="venta-mínima-en-pié">
                            Has
                        </fieldset>
                    </div>

                    <div class="switch-statement" id="switch-ofrece-grano-per-se">
                        <div class="texto-medio statement">
                            <strong></strong>
                        </div>
                        <div class="switch-container" onclick="void swicheaOpción(event);">
                            <!-- for de label e ID de label deben de ser iguales, el name na mas para homogeneidad -->
                            <strong class="izquierda seleccionado">SI</strong>
                            <label class="switch" for="ofrece-grano-per-se">
                                <input type="checkbox" name="ofrece-grano-per-se" id="ofrece-grano-per-se"
                                    onchange="void despliegalasOpciones(lasOpciones);" />
                                <div class="slider round"></div>
                            </label>
                            <strong class="derecha">NO</strong>

                        </div>
                        <div class="texto-medio statement">
                            <strong>considero ofrecerlo ya cosechado, secado y desgranado.</strong>
                        </div>
                    </div>

                    <div class="a-fieldset" id="fieldset-precio-por-unidad-de-medida-per-sé">
                        <fieldset class="precio unidad-de-medida">
                            <legend><strong>el precio al que quiero vender este grano de maíz es de</strong></legend>
                            <div class="numero-opciones">
                                <div class="cifra">
                                    <span class="currency-companion"><strong>$&nbsp;</strong></span><input type="number"
                                        class="valor-medido" min="0" name="precio-por-unidad-de-medidaper-sé"
                                        onchange="void valorVálido(event);">
                                    <span class="currency-companion all-petite-caps"><strong>mxn</strong></span>
                                </div>
                                <span>&nbsp;por&nbsp;</span><select name="opciones-unidad-de-medida-per-sé-precio"
                                    class="opciones-unidad-de-medida"
                                    onchange="void actualizaUnidades(event);"></select>
                            </div>
                        </fieldset>
                    </div>

                    <div class="a-fieldset" id="fieldset-cantidad-de-grano-disponible-per-sé">
                        <fieldset class="unidad-de-medida">
                            <legend><strong>la cantidad de grano que tengo disponible para venta en este lote de grano
                                    de
                                    maíz
                                    es de</strong></legend>
                            <div class="numero-opciones">
                                <div class="cifra">
                                    <input type="number" min="0" step="0.01" class="valor-medido" placeholder="86"
                                        name="cantidad-de-grano-disponible-per-sé">
                                </div>
                                <select name="opciones-unidad-de-medida-per-sé-cantidad"
                                    class="opciones-unidad-de-medida"></select>
                            </div>
                        </fieldset>
                    </div>

                    <div class="switch-statement" id="switch-secado">
                        <div class="texto-medio statement">
                            <strong>le he secado de forma</strong>
                        </div>
                        <div class="switch-container" onclick="void swicheaOpción(event);">
                            <!-- for de label e ID de label deben de ser iguales, el name na mas para homogeneidad -->
                            <strong class="izquierda seleccionado">artesanal</strong>
                            <label class="switch" for="secado">
                                <input type="checkbox" name="secado" id="secado"
                                    onchange="void despliegalasOpciones(lasOpciones);" />
                                <div class="slider round"></div>
                            </label>
                            <strong class="derecha">tecnificada</strong>

                        </div>
                        <div class="texto-medio statement">
                            <strong><span class="variable izquierdo" id="switch-secado-1"></span></strong>
                        </div>
                    </div>

                    <div class="switch-statement" id="switch-desgranado">
                        <div class="texto-medio statement">
                            <strong>le he desgranado de forma</strong>
                        </div>
                        <div class="switch-container" onclick="void swicheaOpción(event);">
                            <!-- for de label e ID de label deben de ser iguales, el name na mas para homogeneidad -->
                            <strong class="izquierda seleccionado">artesanal</strong>
                            <label class="switch" for="desgranado">
                                <input type="checkbox" name="desgranado" id="desgranado"
                                    onchange="void despliegalasOpciones(lasOpciones);" />
                                <div class="slider round"></div>
                            </label>
                            <strong class="derecha">tecnificada</strong>

                        </div>
                        <div class="texto-medio statement">
                            <strong><span class="variable izquierdo" id="switch-secado-1"></span></strong>
                        </div>
                    </div>


                    <div class="switch-statement" id="switch-cuenta-con-análisis-de-aflatoxinas">
                        <div class="texto-medio statement">
                            <strong></strong>
                        </div>
                        <div class="switch-container" onclick="void swicheaOpción(event);">
                            <!-- for de label e ID de label deben de ser iguales, el name na mas para homogeneidad -->
                            <strong class="izquierda seleccionado">NO</strong>
                            <label class="switch" for="cuenta-con-análisis-de-aflatoxinas">
                                <input type="checkbox" name="cuenta-con-análisis-de-aflatoxinas"
                                    id="cuenta-con-análisis-de-aflatoxinas"
                                    onchange="void despliegalasOpciones(lasOpciones);" />
                                <div class="slider round"></div>
                            </label>
                            <strong class="derecha">SI</strong>

                        </div>
                        <div class="texto-medio statement">
                            <strong>cuenta con un análisis de aflatoxinas de acuerdo a la NOM-188-SSA1-2002</strong>
                        </div>
                    </div>

                    <div class="a-fieldset" id="fieldset-análisis-de-aflatoxinas">
                        <fieldset>
                            <legend><strong>seleccione el archivo pdf o de imágen del certificado</strong></legend>
                            <input type="file" accept="image/*,.pdf" name="análisis-de-aflatoxinas" max-size="10000000">
                        </fieldset>
                    </div>

                    <div class="switch-statement" id="switch-cuenta-con-NMX-FF-034">
                        <div class="texto-medio statement">
                            <strong></strong>
                        </div>
                        <div class="switch-container" onclick="void swicheaOpción(event);">
                            <!-- for de label e ID de label deben de ser iguales, el name na mas para homogeneidad -->
                            <strong class="izquierda seleccionado">NO</strong>
                            <label class="switch" for="cuenta-con-NMX-FF-034">
                                <input type="checkbox" name="cuenta-con-NMX-FF-034" id="cuenta-con-NMX-FF-034"
                                    onchange="void despliegalasOpciones(lasOpciones);" />
                                <div class="slider round"></div>
                            </label>
                            <strong class="derecha">SI</strong>

                        </div>
                        <div class="texto-medio statement">
                            <strong>cuenta con un al menos un análisis de calidad del grano conforme la
                                NMX-FF-034/1-SCFI-2002</strong>
                        </div>
                    </div>

                    <div class="a-fieldset" id="fieldset-análisis-NMX-FF-034">
                        <fieldset>
                            <legend><strong>seleccione el o los archivos pdf o de imágen de los análisis</strong>
                            </legend>
                            <input type="file" accept="image/*,.pdf" name="análisis-NMX-FF-034" max-size="10000000"
                                multiple>
                        </fieldset>
                    </div>

                    <div class="switch-statement" id="switch-servicios">
                        <div class="texto-medio statement">
                            <strong></strong>
                        </div>
                        <div class="switch-container" onclick="void swicheaOpción(event);">
                            <!-- for de label e ID de label deben de ser iguales, el name na mas para homogeneidad -->
                            <strong class="izquierda seleccionado">NO</strong>
                            <label class="switch" for="servicios">
                                <input type="checkbox" name="servicios" id="servicios"
                                    onchange="void despliegalasOpciones(lasOpciones);" />
                                <div class="slider round"></div>
                            </label>
                            <strong class="derecha">SI</strong>

                        </div>
                        <div class="texto-medio statement">
                            <strong>puedo brindar algún servicio adicional, <span class="variable izquierdo"
                                    id="switch-servicios-1"></span></strong>
                            <br>
                            <small>por ejemplo: cribado, aquintalado, fumigación/pastilla, maniobras, flete, estiba,
                                etc.
                            </small>
                        </div>
                    </div>

                    <div class="a-fieldset" id="fieldset-servicios-descripción">
                        <fieldset>
                            <legend><strong>describa cada uno de los servicios adicionales que tiene la capacidad de
                                    ofrecer,
                                    con
                                    datos específicos como tarifas, distancias, lugares, especificaciones técnicas,
                                    etc.</strong>
                            </legend>
                            <textarea class="input" role="textbox" name="servicios-descripción" rows="10"
                                placeholder="aqui escribo mis servicios" wrap="soft" cols="20"></textarea>
                        </fieldset>
                    </div>

                    <!-- 
                    acopiadora
                    seguro de transporte
        
                    cribado - impurezas y grano quebrado
        
                    estiba - acomodar en camión o la otra
                    almacenamiento
                    secado
                    fumigación - pastilla
                    aquintalado - meter en costales de 50 kg -->








                    <button type="submit"><strong><span id="btn-submit-text"></span></strong></button>
                </form>
            </div>


        </main>
        
    </div>
    <footer><code>CC NC SA 2024 Alianza por Nuestra Tortilla – Hecha con ♥ en México.</code></footer>

    <dialog id="photo-cropping-modal">
        <div class="header">
            <button class="photo-cropping-modal-close" onclick="closePhotoCroppingModal(event)">Cancelar
                <strong>&times;</strong></button>
        </div>
        <div class="body">
            Mantenga dentro del rectángulo lo que quiera conservar de la imágen.
            <div id="canvas-container">
                <div id="rectangle-container"></div>
            </div>
        </div>
        <div class="footer">
            <button type="button" id="botón-descartar-foto" class="botón botón-rojo">Descartar</button>
            <button type="button" id="botón-así-mero" class="botón botón-morado">Agregar selección</button>
        </div>
    </dialog>

    <template id="template-otro-uso">
        <fieldset class="otro">
            <input class="input-otros" type="text" name="otro-uso" minlength="5" maxlength="30">
            <button type="button" class="btn-cerrar-x" onclick="void killOtro(event);">&times;</button>
        </fieldset>
    </template>
    <template id="template-options-unidad-de-medida">
        <option value="kg">kilogramo<span class="pluralidad s plural"></span></option>
        <option value="ton">tonelada<span class="pluralidad s plural"></span></option>
        <option value="costal">costal<span class="pluralidad es plural"></span> de 50 kg</option>
    </template>

    <section id="image-formatter-code">

        <script>
            var currentFoto = null;
            var clicked = false;
            const leMinWidthFoto = 800;
            const leMinHeightFoto = 600;
            //or 1080×720 pixels
            const aspectRatioFoto = leMinWidthFoto / leMinHeightFoto;
            var leCanvasWidth
            var leCanvasHeight
            var scaleFactor
            var fileListAdHoc = [];
            var webpURLArrAdHoc = [];
        </script>

        <script>
            const lePhotoBar = document.getElementById('photo-bar');

            const observer = new MutationObserver((mutationsList) => {
                for (const mutation of mutationsList) {
                    if (mutation.type === 'childList') {
                        console.log('A child node has been added or removed.');
                        //update formal files form
                        if (!refreshFormPhotos(document.getElementById('input-img-def'), lePhotoBar)) {
                            window.alert('algo salió mal al tratar de actualizar las fotos');
                        }
                    }
                }
            });

            observer.observe(lePhotoBar, { childList: true });
        </script>
        <script>
            function resetPhotoArrays() {
                fileListAdHoc = [];
                webpURLArrAdHoc = [];
            }
        </script>
        <script>
            function refreshFormPhotos(leInput, lePhotoBar) {
                void resetPhotoArrays();
                console.log(lePhotoBar.children);
                for (laFoto of lePhotoBar.children) {

                    console.log(laFoto);
                    if (laFoto.tagName === "CANVAS") {
                        // element is an image
                        // convert to webp file and add to array
                        //****
                        //let a = document.createElement("a");
                        //a.href = canvas2webpURL(laFoto);
                        //a.download = "imagen.webp";
                        //a.click();
                        //*****
                        let webpURL = canvas2webpURL(laFoto);
                        console.log(webpURL);
                        webpURLArrAdHoc.push(webpURL);
                        fileListAdHoc.push(dataURLtoFile(url2Blob(webpURL), nameGenerator()));
                        console.log(fileListAdHoc);
                    }
                }
                return true;
            }
        </script>
        <script>
            function nameGenerator() {
                const leDate = new Date();

                return generateRandomCharacter() + '_' + leDate.getDay() + 'd' + leDate.getMonth() + 'm' + leDate.getFullYear() + 'y' + leDate.getHours() + 'h' + leDate.getMinutes() + 'm' + leDate.getSeconds() + 's' + leDate.getMilliseconds() + 'ms';
            }
            function generateRandomCharacter() {
                //replace random char with user's unique identifier
                var chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
                var randomIndex = Math.floor(Math.random() * chars.length);
                return chars[randomIndex];
            }
        </script>
        <script>
            function canvas2webpURL(canvas, fileName) {
                return canvas.toDataURL("image/webp");
            }
        </script>

        <script>
            async function treatImages(evt) {
                var fotografías = await handleFileInput(evt);
                console.log(fotografías);
                console.log(fotografías.length);
                if (!(fotografías.length >= 1)) {
                    return 0;
                }
                //now let's a pop up tha modal
                document.getElementById('photo-cropping-modal').showModal();

                try {

                    currentFoto = fotografías[0];
                    if (await resizeCanvas(currentFoto)) {
                        console.log('first render done');
                        //wait for acceptance
                        let leInteraction = await interacción();
                        console.log(leInteraction);
                        switch (leInteraction) {
                            case 'así-mero':
                                document.getElementById('photo-cropping-modal').close();
                                lePhotoBar.appendChild(await cropAndResize(currentFoto, leCanvasWidth, leCanvasHeight, aspectRatioFoto, scaleFactor));
                                let leInput = evt.target;
                                //modificar el query selector
                                leInput.closest('form').querySelector("label[for='imgs']").innerHTML = 'Seleccione fotografías adicionales.'
                                leInput.value = null;
                                return 1;

                            default:
                                return 0;
                        }

                    } else {
                        document.getElementById('photo-cropping-modal').close();
                        return 0;
                    }


                } catch (error) {
                    console.log(error)
                }
            }
        </script>
        <script>
            async function interacción() {
                try {
                    console.log('inicia click listening');
                    let presionaAlgo = new Promise((resolve, reject) => {
                        //document.querySelector('button#photo-cropping-modal-close').addEventListener('click', resolve('cancelar'));//should be redundant
                        document.querySelector('button#botón-descartar-foto').addEventListener('click', () => {
                            console.log('presionaron descartar foto');
                            resolve('descartar-foto');
                        });
                        document.querySelector('button#botón-así-mero').addEventListener('click', () => {
                            console.log('presionaron así mero');
                            resolve('así-mero');
                        });
                        document.querySelector('dialog#photo-cropping-modal').addEventListener('close', () => {
                            console.log('presionaron cancelar');
                            resolve('cancelar');
                        });


                    });

                    return await presionaAlgo
                        .then(result => {
                            void deleteEventListener('button#botón-descartar-foto');
                            void deleteEventListener('button#botón-así-mero');
                            void deleteEventListener('dialog#photo-cropping-modal');
                            return result;
                        })
                        .catch(error => {
                            console.log('e1');
                            console.error(error);
                        });

                } catch (error) {
                    console.log('e2');
                    console.error(error.message);
                    return false;
                }
            }
        </script>
        <script>
            function deleteEventListener(daQuerySelector) {
                //reemplazando por clon es lo más fácil, dice bing
                const el = document.querySelector(daQuerySelector);
                const clone = el.cloneNode(true);
                el.parentNode.replaceChild(clone, el);
            }
        </script>

        <script>
            async function loadImage(url) {
                return new Promise((resolve, reject) => {
                    const img = new Image();
                    img.crossOrigin = 'anonymous';
                    img.onload = () => resolve(img);
                    img.onerror = (err) => reject(err);
                    img.src = url;
                });
            }
            async function drawImage(url) {

                try {
                    return await loadImage(url);
                } catch (err) {
                    console.log(err);
                }
            }
        </script>
        <script>
            async function logImageData(file, reader) {
                try {
                    const fileResult = await reader(file);
                    return fileResult.result;
                    // handle fileResult
                } catch (err) {
                    return err;
                    // handle error
                }
            }
        </script>
        <script>
            async function handleFileInput(evt) {
                var files = event.target.files;
                var lePhotos = [];
                for (var i = 0; i <= (files.length - 1); i++) {
                    let file = files[i]; //le current file
                    // Only process image files.
                    if (!file.type.match('image.*')) {
                        continue;
                    }

                    const reader = (file) => new Promise((resolve, reject) => {
                        const fr = new FileReader();
                        fr.onload = () => resolve(fr);
                        fr.onerror = (err) => reject(err);
                        fr.readAsDataURL(file);
                    });

                    lePhotos.push(await logImageData(file, reader))

                }
                return lePhotos;
            }
        </script>
        <script>
            function closePhotoCroppingModal(event) {
                event.target.closest('dialog#photo-cropping-modal').close();
            }
        </script>
        <script>
            window.onresize = () => {
                console.log('allegedly resizing');
                if (document.querySelector('dialog#photo-cropping-modal').open == true) {
                    resizeCanvas(currentFoto);
                }
            };
        </script>
        <script>
            async function resizeCanvas(foto) {
                console.log('resizing Canvas');
                if (document.querySelector('canvas.photo-cropping-canvas') !== null) {
                    document.querySelector('canvas.photo-cropping-canvas').remove();

                }
                if (document.querySelector('#photo-cropping-rectangle') !== null) {
                    document.querySelector('#photo-cropping-rectangle').remove();

                }

                let fotoImg = await drawImage(foto);

                //check if min size
                if (Math.min(fotoImg.naturalHeight / leMinHeightFoto, fotoImg.naturalWidth / leMinWidthFoto) < 1) {
                    document.getElementById('input-fotos').value = null;
                    window.alert('¡fotografía demasiado pequeña!\nTomar con mayor resolución\ny/o de forma horizontal.');
                    return false;
                }

                let canvas = document.createElement("canvas");
                canvas.setAttribute("class", "photo-cropping-canvas");
                canvas.style.width = '100%';
                canvas.style.height = '80%';
                document.getElementById('canvas-container').appendChild(canvas);
                canvas = document.querySelector('canvas.photo-cropping-canvas');

                leCanvasWidth = parseFloat(window.getComputedStyle(canvas).getPropertyValue("width")
                    .replace(/[^0-9.]/g, ""));
                leCanvasHeight = parseFloat(window.getComputedStyle(canvas).getPropertyValue("height").replace(
                    /[^0-9.]/g, ""));

                scaleFactor = Math.min(leCanvasWidth / fotoImg.naturalWidth, leCanvasHeight / fotoImg
                    .naturalHeight);
                if (scaleFactor > 1) {
                    scaleFactor = 1;
                }

                scaledImgWidth = scaleFactor * fotoImg.naturalWidth;
                scaledImgHeight = scaleFactor * fotoImg.naturalHeight;
                canvas.height = leCanvasHeight;
                canvas.width = leCanvasWidth;
                canvas.getContext('2d', { preserveDrawingBuffer: true }).drawImage(fotoImg, 0, 0, fotoImg.naturalWidth, fotoImg.naturalHeight, 0, 0,
                    scaledImgWidth, scaledImgHeight);
                let leRectangle = document.createElement('div');
                leRectangle.setAttribute("id", "photo-cropping-rectangle");
                leRectangle.style.width = leMinWidthFoto * scaleFactor + 'px';
                leRectangle.style.height = leMinHeightFoto * scaleFactor + 'px';
                let rectangleContainer = document.getElementById('rectangle-container');
                rectangleContainer.style.width = scaledImgWidth + 'px';
                rectangleContainer.style.height = scaledImgHeight + 'px';
                rectangleContainer.appendChild(leRectangle);

                interact('#photo-cropping-rectangle')
                    .draggable({
                        listeners: {
                            move: function (event) {
                                var target = event.target;
                                var x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx;
                                var y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;

                                // restrict the movement of the rectangle within the rectangleContainer
                                x = Math.min(Math.max(x, 0), scaledImgWidth - target.offsetWidth);
                                y = Math.min(Math.max(y, 0), scaledImgHeight - target.offsetHeight);

                                target.style.transform = 'translate(' + x + 'px, ' + y + 'px)';
                                target.setAttribute('data-x', x);
                                target.setAttribute('data-y', y);
                            }
                        }
                    })
                    .resizable({
                        modifiers: [
                            interact.modifiers.aspectRatio({
                                // make sure the aspect ratio is constant
                                ratio: aspectRatioFoto,
                                // also restrict the size by nesting another modifier
                                modifiers: [
                                    interact.modifiers.restrictSize({
                                        min: {
                                            width: leMinWidthFoto * scaleFactor,
                                            height: leMinHeightFoto * scaleFactor
                                        },
                                        max: {
                                            width: scaledImgWidth,
                                            height: scaledImgHeight
                                        }
                                    }),
                                    interact.modifiers.restrictEdges({
                                        outer: 'parent',
                                        endOnly: true
                                    })
                                ],
                            }),
                        ],
                        edges: {
                            left: false,
                            right: true,
                            bottom: true,
                            top: false
                        },
                        inertia: true
                    })
                    .on('resizemove', function (event) {
                        var target = event.target;
                        var x = (parseFloat(target.getAttribute('data-x')) || 0);
                        var y = (parseFloat(target.getAttribute('data-y')) || 0);

                        target.style.width = event.rect.width + 'px';
                        target.style.height = event.rect.height + 'px';

                        x += event.deltaRect.left;
                        y += event.deltaRect.top;

                        target.style.transform = 'translate(' + x + 'px, ' + y + 'px)';
                        target.setAttribute('data-x', x);
                        target.setAttribute('data-y', y);
                    });
                return true;
            }
        </script>
        <script>
            async function cropAndResize(currentFoto, leCanvasWidth, leCanvasHeight, aspectRatioFoto, scaleFactor) {

                let leRectangle = document.getElementById('photo-cropping-rectangle');
                console.log(leRectangle.getAttribute("data-x"));
                console.log(parseFloat(leRectangle.getAttribute("data-x")));

                let scaledOriginX = parseFloat(leRectangle.getAttribute("data-x"));
                console.log(scaledOriginX);
                if (isNaN(scaledOriginX)) {
                    scaledOriginX = 0;
                }
                let scaledOriginY = parseFloat(leRectangle.getAttribute("data-y"));
                if (isNaN(scaledOriginY)) {
                    scaledOriginY = 0;
                }
                let scaledHeight = parseFloat(leRectangle.style.height);
                let scaledWidth = parseFloat(leRectangle.style.width);

                //get unscaled positions and dimensions. Just divide by the scaling factor
                //scaledOriginX/scaleFactor
                //scaledOriginY/scaleFactor
                //scaledHeight/scaleFactor
                //scaledWidth/scaleFactor
                // rescalated dimensions
                // reScaledHeight = leMinHeightFoto;
                // reScalatedWidth = leMinWidthFoto;

                //create canvas with rescalated dimensions, draw croped and rescalated image

                //const originalImage = await createImageBitmap(await url2Blob(currentFoto));
                const originalImage = await drawImage(currentFoto);
                let canvasAdHoc = document.createElement('canvas');
                canvasAdHoc.width = leMinWidthFoto;
                canvasAdHoc.height = leMinHeightFoto;
                console.log(originalImage, (scaledOriginX / scaleFactor), (scaledOriginY / scaleFactor), (scaledWidth / scaleFactor), (scaledHeight / scaleFactor), 0, 0, leMinWidthFoto, leMinHeightFoto);
                canvasAdHoc.getContext('2d', { preserveDrawingBuffer: true }).drawImage(originalImage, (scaledOriginX / scaleFactor), (scaledOriginY / scaleFactor), (scaledWidth / scaleFactor), (scaledHeight / scaleFactor), 0, 0, leMinWidthFoto, leMinHeightFoto);
                //return await drawImage(canvasAdHoc.toDataURL());
                return canvasAdHoc;
            }
        </script>
        <script>
            async function url2Blob(imageUrl) {
                return await (await fetch(imageUrl)).blob();
            }
        </script>

        <script>
            function dataURLtoFile(webpBlob, filename) {
                return new File([webpBlob], filename + ".webp", { type: "image/webp" });
            }
        </script>
        <script>
            // borrar esta función, ya no se usa
            function setPhotos(event) {
                //set button unclickable
                event.target.disabled = true;
                let leInput = document.getElementById('input-fotos');
                // set non editable
                leInput.disabled = true;
                // clear
                leInput.value = null;
                //add files
                leInput.setAttribute('multiple', true);
                // Al parecer no se puede añadir archivos a un input de forma programática, habría que alterar el formData ya que se vaya a enviar la form:
                //const formData = new FormData();
                //formData.append('file', file);
                //habría que haerlo para cada file en el array fileListAdHoc
            }

            function addPhoto(event) {
                let leInput = document.getElementById('input-fotos');
                leInput.click();
            }
        </script>
        <script>
            function cancelBarImages(event) {
                void resetPhotoArrays();
                let leInput = document.getElementById('input-fotos');
                leInput.disabled = false;
                document.getElementById('ya-estuvo').disabled = false;
                leInput.value = null;

                while (lePhotoBar.firstChild) {
                    lePhotoBar.removeChild(lePhotoBar.firstChild);
                }
            }
        </script>



    </section>

    <script>
        function despliegaMenú(event) {
            document.getElementById('side-menu').classList.toggle("show");
        }
    </script>

    <script>

        const urlParams = new URLSearchParams(window.location.search);
        const tipoDeEdición = urlParams.get('tEd');
        // http://localhost:5500/edita-elote/edita-elote.html?tEd=new
        // http://localhost:5500/edita-elote/edita-elote.html?tEd=edit
        //?product=shirt&color=blue&newuser&size=m

        const posDocVars = {
            "new": {
                "título": "nuevo e-lote",
                "subtítulo": "registrando nuevo",
                "btn-submit": "registrar"
            },
            "edit": {
                "título": "nuevo e-lote",
                "subtítulo": "modificando",
                "btn-submit": "actualizar"
            }
        }
        let cual
        switch (tipoDeEdición) {

            case "new":
                cual = posDocVars["new"];
                break;
            case "edit":
                cual = posDocVars["edit"];
                break;

            default:
                cual = posDocVars["new"];
                break;
        }

        const docVars = cual;

        document.title = docVars["título"];
        document.getElementById('el-subtítulo').innerHTML = docVars["subtítulo"];
        document.getElementById('btn-submit-text').innerHTML = docVars["btn-submit"];

    </script>
    <script src="../js/switch.js"></script>
    <script>
        const lasOpciones = {
            "switch-semilla-propia": {
                "izquierda": {},
                "derecha": {
                    "switch-comprada-truequeada": {
                        "izquierda": {},
                        "derecha": {}
                    },
                    "switch-origen-distinto": {
                        "izquierda": {
                            "fieldset-nombre-origen-distinto": true
                        },
                        "derecha": {}
                    }
                }
            },
            "switch-cuenta-con-certificación": {
                "izquierda": {},
                "derecha": {
                    "switch-cuenta-con-certificación-orgánica": {
                        "izquierda": {},
                        "derecha": {
                            "fieldset-certificado-orgánico": true
                        }
                    },
                    "switch-cuenta-con-certificación-libre-de-OGM": {
                        "izquierda": {},
                        "derecha": {
                            "fieldset-certificado-libre-de-OGM": true
                        }
                    }
                }
            }, "switch-ofrece-en-pié": {
                "izquierda": {},
                "derecha": {
                    "fieldset-precio-por-unidad-de-medida-en-pié": true,
                    "fieldset-hectáreas-disponibles-en-pié": true,
                    "fieldset-venta-mínima-en-pié": true
                }
            },
            "switch-ofrece-grano-per-se": {
                "izquierda": {
                    "fieldset-precio-por-unidad-de-medida-per-sé": true,
                    "fieldset-cantidad-de-grano-disponible-per-sé": true,
                    "switch-secado": {
                        "izquierda": {},
                        "derecha": {}
                    },
                    "switch-desgranado": {
                        "izquierda": {},
                        "derecha": {}
                    },
                    "switch-cuenta-con-análisis-de-aflatoxinas": {
                        "izquierda": {},
                        "derecha": {
                            "fieldset-análisis-de-aflatoxinas": true
                        }
                    },
                    "switch-cuenta-con-NMX-FF-034": {
                        "izquierda": {},
                        "derecha": {
                            "fieldset-análisis-NMX-FF-034": true
                        }
                    },
                    "switch-servicios": {
                        "izquierda": {},
                        "derecha": {
                            "fieldset-servicios-descripción": true
                        }
                    }

                },
                "derecha": {}
            }


        };

        //  {

        //     "switch-proxy": {
        //         "izquierda": {
        //             "switch-email": {
        //                 "izquierda": {
        //                     "fieldset-email": true
        //                 },
        //                 "derecha": {},
        //             },
        //             "switch-tel-móvil": {
        //                 "izquierda": {
        //                     "fieldset-tel-móvil": true
        //                 },
        //                 "derecha": {}
        //             },
        //             "switch-tel-fijo": {
        //                 "izquierda": {
        //                     "fieldset-tel-fijo": true
        //                 },
        //                 "derecha": {}
        //             }
        //         },
        //         "derecha": {
        //             "fieldset-nombre-proxy": true,
        //             "fieldset-relación-proxy": true,
        //             "switch-email-proxy": {
        //                 "izquierda": {
        //                     "fieldset-email-proxy": true
        //                 },
        //                 "derecha": {}
        //             },
        //             "switch-tel-móvil-proxy": {
        //                 "izquierda": {
        //                     "fieldset-tel-móvil-proxy": true
        //                 },
        //                 "derecha": {}
        //             },
        //             "switch-tel-fijo-proxy": {
        //                 "izquierda": {
        //                     "fieldset-tel-fijo-proxy": true
        //                 },
        //                 "derecha": {}
        //             }
        //         }
        //     }

        // };

        const eitherOr = {
            1: ["switch-email", "switch-tel-móvil", "switch-tel-fijo"],
            2: ["switch-email-proxy", "switch-tel-móvil-proxy",
                "switch-tel-fijo-proxy"]

        }

    </script>
    <script src="../js/despliegaOpciones.js"></script>
    <script>
        void despliegalasOpciones(lasOpciones);
    </script>
    <script>
        function actualizaNombreDeElote(event) {
            document.getElementById('subtíulo-bottom').innerHTML = event.target.value;
        }
    </script>
    <script async src="../js/checkDaBox.js"></script>
    <script src="../js/otros.js"></script>
    <script>
        void añadeOtro('otros-usos', 'template-otro-uso');
    </script>
    <script>
        let selectsUnidadDeMedida = document.querySelectorAll('select.opciones-unidad-de-medida');
        for (let index = 0; index < selectsUnidadDeMedida.length; index++) {
            const selectUnidadDeMedida = selectsUnidadDeMedida[index];
            selectUnidadDeMedida.appendChild(document.getElementById("template-options-unidad-de-medida").content.cloneNode(true));
            selectUnidadDeMedida.dispatchEvent(new Event('change'));

        }

        function actualizaUnidades(event) {
            const daSelect = event.target;
            const daFieldset = daSelect.closest('fieldset.unidad-de-medida');
            let tipo
            if (daFieldset.classList.contains('precio')) {
                tipo = 'precio';
            } else if (daFieldset.classList.contains('cantidad')) {
                tipo = 'cantidad';
            }

            const daInput = daFieldset.querySelector('input.valor-medido');

            let minValue;
            let maxValue;
            let leStep;
            let suggestedValue;

            switch (tipo) {
                case 'precio':
                    switch (daSelect.value) {
                        case "kg":
                            minValue = 7;
                            maxValue = 99;
                            leStep = 0.01;
                            suggestedValue = 12;

                            break;
                        case "ton":
                            minValue = 7000;
                            maxValue = 99 * 7000;
                            leStep = 1;
                            suggestedValue = 12000;

                            break;
                        case "costal":
                            minValue = 50 * 7;
                            maxValue = 50 * 99;
                            leStep = 1;
                            suggestedValue = 50 * 12;

                            break;

                        default:
                            break;
                    }

                    break;
                case 'cantidad':
                    switch (daSelect.value) {
                        case "kg":
                            minValue = 1;
                            maxValue = undefined;
                            leStep = 1;

                            break;
                        case "ton":
                            minValue = 1;
                            maxValue = undefined;
                            leStep = 0.1;

                            break;
                        case "costal":
                            minValue = 1;
                            maxValue = undefined;
                            leStep = 1;

                            break;

                        default:
                            break;
                    }

                    break;

                default:
                    break;
            }

            if (minValue) {
                daInput.setAttribute("min", minValue);
            } else {
                daInput.removeAttribute("min");
            }

            if (maxValue) {
                daInput.setAttribute("max", maxValue);
            } else {
                daInput.removeAttribute("max");
            }

            if (leStep) {
                daInput.setAttribute("step", leStep);
            } else {
                daInput.removeAttribute("step");
            }

            if (suggestedValue) {
                daInput.setAttribute("placeHolder", suggestedValue);
            } else {
                daInput.removeAttribute("step");
            }

            daInput.dispatchEvent(new Event('change'));

        }

        function valorVálido(event) {
            // debugger
            const daInput = event.target;
            const minValue = daInput.getAttribute('min');
            const maxValue = daInput.getAttribute('max');

            if (daInput.value) {
                if (Number(daInput.value) < Number(minValue)) {
                    daInput.value = minValue.toString();
                } else if (Number(daInput.value) > Number(maxValue)) {
                    daInput.value = maxValue.toString();
                }
                const decimales = {
                    1: 0,
                    0.1: 1,
                    0.01: 2
                };


                // debugger
                // console.log("isNaN:" + isNaN(daInput.value));
                daInput.value = Number(daInput.value).toFixed(decimales[daInput.getAttribute('step')]).toString();
            }




        }

    </script>
</body>

</html>